@page "/counter"
@rendermode InteractiveWebAssembly

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @currentCount</p>


<MudBlazor.MudButton @onclick="IncrementCount">Click me</MudBlazor.MudButton>

<p role="status">Current count B: @currentCountb</p>


<MudBlazor.MudButton @onclick="IncrementCountB">Click me2</MudBlazor.MudButton>

@code {
    private int currentCount = 0;
    private int currentCountb = 0;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await Task.Delay(6000);
    }

    private async Task IncrementCount()
    {
        await HeavyComputeAsync();
        currentCount += 3;
    }

    private void IncrementCountB()
    {
        currentCountb += 1;
    }


    private static Task<int> HeavyComputeAsync()
    {
        return Task.Run(() =>
        {
            Console.WriteLine("Task start");

            for (long ndx = 0; ndx < 2000000; ++ndx)
                ndx.ToString();

            Console.WriteLine("Task end");
            return 0;
        });
    }
}
